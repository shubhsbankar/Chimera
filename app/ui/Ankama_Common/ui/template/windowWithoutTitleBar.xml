<windowWithoutTitleBar>

	<Import url="[config.mod.template]button/themeIconButton.xml" />
	<Import url="[config.mod.template]block.xml" />

	<!-- Parametres du template -->
	<Param name="name">$TEMPLATE_INSTANCE_ID</Param>
	<Param name="Size">
		<AbsDimension x="500" y="400" 	/>
	</Param>
	<Param name="Anchors">
		<Anchor>
			<AbsDimension x="0" y="0" />
		</Anchor>
	</Param>
	<Param name="noCloseButton">false</Param>	
	<Param name="Content"></Param>
    <Param name="BehindFrameContent"></Param>
	<Param name="OverFrameContent">null</Param>
	<Param name="mouseEnabled">false</Param>

	<Param name="title"> </Param>
    <Param name="bgThemeDataId">window_background</Param>
	<Param name="bgAlpha">0.9</Param>
	<Param name="bgColor">-1</Param>
	
	<Param name="titleYOffset">0</Param>
	<Param name="visible">true</Param>
	<Param name="isInstance">false</Param>
	
	<!-- Variables internes au template -->	
	<Var name="window_container">'#name'</Var>
	<Var name="window_tx_background">'tx_background_' + '#name'</Var>
	<Var name="window_tx_border_frame">'tx_border_frame_' + '#name'</Var>	
	<Var name="window_tx_background_close_button">'tx_background_close_button_' + '#name'</Var>
	<Var name="window_lbl_title">'lbl_title_' + '#name'</Var>	
	<Var name="btn_close">'btn_close_' + '#name'</Var>
    <Var name="noBehindContent">'#BehindFrameContent' == 'null'</Var>
    <Var name="noOverContent">'#OverFrameContent' == 'null'</Var>	
	<Var name="titleTopY">25 + #titleYOffset</Var>
	<Var name="titleBottomY">50 + #titleYOffset</Var>
	<Var name="noTextureBg">'#bgColor' != -1</Var>
	<Var name="noBg">'#bgColor' == -1</Var>
		
	<Container name="$window_container">	
		<Anchors>
			#Anchors
		</Anchors>
		<Size>
			#Size
		</Size>
		<visible>#visible</visible>
		<isInstance>#isInstance</isInstance>

		<mouseEnabled>#mouseEnabled</mouseEnabled>
		
        <Container ignore="$noBehindContent">
            <Anchors>
                <Anchor relativeTo="$window_tx_border_frame" relativePoint="TOPLEFT">
                    <AbsDimension x="22" y="22" />
                </Anchor>
                <Anchor relativeTo="$window_tx_border_frame" relativePoint="BOTTOMRIGHT">
                    <AbsDimension x="-22" y="-25" />
                </Anchor>
            </Anchors>
			<isInstance>#isInstance</isInstance>
            #BehindFrameContent
        </Container>
        
		<!-- background -->
		<TextureBitmap name="$window_tx_background" ignore="$noTextureBg">
			<Anchors>
				<Anchor relativeTo="$window_tx_border_frame" relativePoint="TOPLEFT">
					<AbsDimension x="20" y="20" />
				</Anchor>
				<Anchor relativeTo="$window_tx_border_frame" relativePoint="BOTTOMRIGHT">
					<AbsDimension x="-20" y="-23" />
				</Anchor>
			</Anchors>		
			<themeDataId>#bgThemeDataId</themeDataId>
			<alpha>#bgAlpha</alpha>
			<isInstance>#isInstance</isInstance>
		</TextureBitmap>
		
		<Container ignore="$noBg">
			<Anchors>
				<Anchor relativeTo="$window_tx_border_frame" relativePoint="TOPLEFT">
					<AbsDimension x="20" y="20" />
				</Anchor>
				<Anchor relativeTo="$window_tx_border_frame" relativePoint="BOTTOMRIGHT">
					<AbsDimension x="-20" y="-23" />
				</Anchor>
			</Anchors>		
			<bgColor>#bgColor</bgColor>
			<alpha>#bgAlpha</alpha>
			<isInstance>#isInstance</isInstance>
		</Container>
		
	     <!-- Content -->
	     
   		<Container>
			<Anchors>
				<Anchor relativeTo="$window_tx_border_frame" relativePoint="TOPLEFT">
					<AbsDimension x="22" y="22" />
				</Anchor>
				<Anchor relativeTo="$window_tx_border_frame" relativePoint="BOTTOMRIGHT">
					<AbsDimension x="-22" y="-25" />
				</Anchor>
			</Anchors>
			<isInstance>#isInstance</isInstance>
			#Content
			<!--  there is a bug when calculating size	
			<block>
				<Size>
					<RelDimension x="1" y="1" />
				</Size>
			</block>
			-->
		</Container>
		
		<!-- frame -->
		
		<TextureBitmap name="$window_tx_border_frame">
			<Size>
				<RelDimension x="1" y="1"/>
			</Size>
			<themeDataId>popup_border_frame</themeDataId>
			<smooth>true</smooth>
			<isInstance>#isInstance</isInstance>
		</TextureBitmap>
		
		<!-- Close button -->
		<TextureBitmap name="$window_tx_background_close_button" ignore="#noCloseButton">
			<Anchors>
				<Anchor point="BOTTOMLEFT" relativePoint="TOPRIGHT" relativeTo="$window_tx_border_frame">
					<AbsDimension x="-65" y="65" />
				</Anchor>
			</Anchors>
			<Size>
				<AbsDimension x="46" y="47" />
			</Size>
			<themeDataId>popup_close_background</themeDataId>
			<isInstance>#isInstance</isInstance>
		</TextureBitmap>
		
		<themeIconButton name="$btn_close" ignore="#noCloseButton">
			<Anchors>
				<Anchor point="TOPRIGHT" relativePoint="TOPRIGHT">
					<AbsDimension x="-22" y="22" />
				</Anchor>
			</Anchors>
			<Size>
				<AbsDimension x="30" y="25" />
			</Size>
			<bgThemeDataId>button_close</bgThemeDataId>
			<smooth>true</smooth>
			<isInstance>#isInstance</isInstance>
	     </themeIconButton>
	     
	     <!-- Title -->
	     <Label name="$window_lbl_title">
			<Anchors>
				<Anchor>
					<AbsDimension x="0" y="$titleTopY" />
				</Anchor>
				<Anchor relativePoint="TOPRIGHT">
					<AbsDimension x="0" y="$titleBottomY" />
				</Anchor>
			</Anchors>
			<css>[local.css]title.css</css>		
			<cssClass>center</cssClass>		
			<verticalAlign>center</verticalAlign>
			<fixedHeight>false</fixedHeight>
			<text>#title</text>
			 <isInstance>#isInstance</isInstance>
		</Label>
		
		 <!-- Over Content -->
	     
   		<Container ignore="$noOverContent">
			<Anchors>
				<Anchor relativeTo="$window_tx_border_frame" relativePoint="TOPLEFT">
					<AbsDimension x="22" y="22" />
				</Anchor>
				<Anchor relativeTo="$window_tx_border_frame" relativePoint="BOTTOMRIGHT">
					<AbsDimension x="-22" y="-25" />
				</Anchor>
			</Anchors>
			<isInstance>#isInstance</isInstance>
			#OverFrameContent
		</Container>
	</Container>
</windowWithoutTitleBar>